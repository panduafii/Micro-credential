# Story 1.2: Track Catalog Management

## Status
- ✅ Completed

## Story
**As an** admin,  
**I want** to define and maintain role/track metadata,  
**so that** assessments can tailor content to the selected focus area.

## Acceptance Criteria
1. ✅ `/api/v1/tracks` CRUD endpoints exist (admin-only) with audit logging.
2. ✅ Track schema captures name, description, skill focus tags, and question mix overrides.
3. ✅ GET endpoints expose active tracks for student preview.
4. ✅ Track seeds load during migration with examples (Backend Engineer, Data Analyst).

## Implementation Details

### API Endpoints
| Method | Endpoint | Auth | Description |
|--------|----------|------|-------------|
| GET | `/tracks` | Public | List all active tracks with question counts |
| GET | `/tracks/{slug}` | Public | Get track details by slug |
| POST | `/tracks` | Admin | Create new track |
| PATCH | `/tracks/{slug}` | Admin | Update existing track |
| DELETE | `/tracks/{slug}` | Admin | Soft-delete track |

### Data Model
```python
class RoleCatalog:
    id: int
    slug: str (unique)
    name: str
    description: str | None
    skill_focus_tags: list[str] | None
    question_mix_overrides: dict[str, int] | None
    is_active: bool
    created_at: datetime
    updated_at: datetime
```

### Files Changed
- `src/api/routes/tracks.py` - CRUD endpoints
- `src/api/schemas/tracks.py` - Pydantic schemas
- `src/infrastructure/db/models.py` - RoleCatalog model
- `src/domain/reference_data.py` - Seed data
- `alembic/versions/202412250002_add_track_catalog_fields.py` - Migration
- `tests/unit/test_tracks.py` - Integration test
- `tests/unit/test_tracks_crud.py` - Unit tests (8 tests)

### Test Coverage
- `test_list_tracks_returns_active_only`
- `test_create_track_requires_admin`
- `test_create_track_duplicate_slug_fails`
- `test_get_track_by_slug`
- `test_get_nonexistent_track_returns_404`
- `test_update_track_requires_admin`
- `test_delete_track_soft_deletes`
- `test_update_nonexistent_track_returns_404`

## Change Log
| Date       | Version | Description | Author |
|------------|---------|-------------|--------|
| 2025-12-25 | 1.0     | Completed implementation | Dev Agent |
